@page
@model DrAppModel
@{
    ViewData["Title"] = "Patient Appointment";
}
<div class="header-inner">
            <div class="container">
                <div class="inner">
                    <div class="row">
                        <div class="col-lg-3 col-md-3 col-12">
                            <div class="logo">
                                <a href="index"><img src="img/logo.png" alt="#"></a>
                            </div>
                            <div class="mobile-nav"></div>
                        </div> 
                        <div class="col-lg-7 col-md-9 col-12">
                            <div class="main-menu">
                                <nav class="navigation">
                                    <ul class="nav menu">
                                        <li><a href="index">Home</a></li>
                                        <li><a href="#">Pages <i class="icofont-rounded-down"></i></a>
                                            <ul class="dropdown">
                                                <li><a href="404.html">404 Error</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="ContactUs">Contact Us</a></li>
										<li class="active"><a href="/Appointments/PatientApp">Appointments</a></li>
                                        <li><a href="DrProfile">My Profile</a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

<div class="breadcrumbs overlay" style="background-image: url('img/image.png');">
    <div class="container">
        <div class="bread-inner">
            <div class="row">
                <div class="col-12">
                    <h2>Appointments</h2>
                    <ul class="bread-list">
                        <li><a href="Index">Home</a></li>
                        <li><i class="icofont-simple-right"></i></li>
                        <li class="active">Appointments</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>


<style>
    h1 {text-align: center;}
    h2 {text-align: center;}
    p {text-align: center;}
    .Appointments {
        align-items: center;
        margin: 0 auto;
        width: 80%;
    }
</style>

<div class="Appointments">
    <br>
    <div class="tabs">
        <button class="tab active" onclick="showSection('upcoming')">Upcoming</button>
        <button class="tab" onclick="showSection('pending')">Pending</button>
        <button class="tab" onclick="showSection('completed')">Completed</button>
        <button class="tab" onclick="showSection('canceled')">Canceled</button>
    </div>
    
    <!-- Upcoming Appointments -->
    <div id="upcoming" class="Appointment-section active">
        <h2>Today</h2>
        <br>
        <div class="Appointments-group">
            @foreach (var Appointment in Model.TodayAppointments)
            {
                <div class="Appointment-card">
                    <div class="Appointment-header">
                        <img src="@Appointment.image" alt="@Appointment.Name" class="user-photo" />
                        <span>@Appointment.Name</span>
                        <span class="status confirmed">@Appointment.Status</span>
                    </div>
                    <div class="Appointment-info">
                        <div>
                            <span class="icon">‚è∞</span> @Appointment.Time
                        </div>
                        <div>
                            <span class="icon">üìÖ</span> @Appointment.Date
                        </div>
                    </div>
                    <div class="Appointment-actions">
                        <form method="get" asp-page-handler="Cancel">
                            <input type="hidden" name="aid" value="@Appointment.id" />
                            <button class="btn cancel">Cancel</button>

                        </form>
                        <form method="post" asp-page-handler="Diagnose">
                            <input type="hidden" name="aid" value="@Appointment.id" />
                            <input type="hidden" name="pid" value="@Appointment.Pid" />
                            <input type="hidden" name="did" value="@Appointment.Did" />
                            <button class="btn diagnose">Diagnose</button>
                        </form>
                    </div>
                </div>
            }
        </div>
        <br>
        <h2>Tomorrow</h2>
        <br>
        <div class="Appointments-group">
            @foreach (var Appointment in Model.TomorrowAppointments)
            {
                <div class="Appointment-card">
                    <div class="Appointment-header">
                        <img src="@Appointment.image" alt="@Appointment.Name" class="user-photo" />
                        <span>@Appointment.Name</span>
                        <span class="status confirmed">@Appointment.Status</span>
                    </div>
                    <div class="Appointment-info">
                        <div>
                            <span class="icon">‚è∞</span> @Appointment.Time
                        </div>
                        <div>
                            <span class="icon">üìÖ</span> @Appointment.Date
                        </div>
                    </div>
                    <div class="Appointment-actions">
                        <input type="hidden" name="aid" value="@Appointment.id" />

                        <form method="get" asp-page-handler="Cancel">
                            <button class="btn cancel">Cancel</button>

                        </form>
                        <form method="post" asp-page-handler="Diagnose">
                            <input type="hidden" name="aid" value="@Appointment.id" />
                            <input type="hidden" name="pid" value="@Appointment.Pid" />
                            <input type="hidden" name="did" value="@Appointment.Did" />
                            <button class="btn diagnose">Diagnose</button>

                        </form>
                    </div>
                </div>
            }
        </div>
        <br>
        <h2>Later</h2>
        <br>
        <div class="Appointments-group">
            @foreach (var Appointment in Model.LaterAppointments)
            {
                <div class="Appointment-card">
                    <div class="Appointment-header">
                        <img src="@Appointment.image" alt="@Appointment.Name" class="user-photo" />
                        <span>@Appointment.Name</span>
                        <span class="status confirmed">@Appointment.Status</span>
                    </div>
                    <div class="Appointment-info">
                        <div>
                            <span class="icon">‚è∞</span> @Appointment.Time
                        </div>
                        <div>
                            <span class="icon">üìÖ</span> @Appointment.Date
                        </div>
                    </div>
                    <div class="Appointment-actions">
                        <form method="get" asp-page-handler="Cancel">
                            <input type="hidden" name="aid" value="@Appointment.id" />

                            <button class="btn cancel">Cancel</button>

                        </form>
                        <form method="post" asp-page-handler="Diagnose">
                            <input type="hidden" name="aid" value="@Appointment.id" />
                            <input type="hidden" name="pid" value="@Appointment.Pid" />
                            <input type="hidden" name="did" value="@Appointment.Did" />
                            <button class="btn diagnose">Diagnose</button>

                        </form>
                    </div>
                </div>
            }
        </div>
    </div>

    <div id="pending" class="Appointment-section">
        <h2>Pending for confirmation</h2>
        <br>
        <div class="Appointments-group">
            @foreach (var Appointment in Model.PendingAppointments)
            {
                <div class="Appointment-card">
                    <div class="Appointment-header">
                        <img src="@Appointment.image" alt="@Appointment.Name" class="user-photo" />
                        <span>@Appointment.Name</span>
                        <span class="status pending">@Appointment.Status</span>
                    </div>
                    <div class="Appointment-info">
                        <div>
                            <span class="icon">‚è∞</span> @Appointment.Time
                        </div>
                        <div>
                            <span class="icon">üìÖ</span> @Appointment.Date
                        </div>
                    </div>
                    <div class="Appointment-actions">
                        <form method="get" asp-page-handler="Confirm">
                            <button class="btn confirm">Confirm</button>

                        </form>
                        <form method="get" asp-page-handler="Cancel">
                            <input type="hidden" name="id" value="@Appointment.id" />
                            <button class="btn decline">Decline</button>
                        </form>
                 
                    </div>
                </div>
            }
        </div>
    </div>

    <!-- Completed Appointments -->
    <div id="completed" class="Appointment-section">
        <h2>Completed Appointments</h2>
        <br>
        <div class="Appointments-group">
            @foreach (var Appointment in Model.CompletedAppointments)
            {
                <div class="Appointment-card">
                    <div class="Appointment-header">
                        <img src="@Appointment.image" alt="@Appointment.Name" class="user-photo" />
                        <span>@Appointment.Name</span>
                        <span class="status completed">@Appointment.Status</span>
                    </div>
                    <div class="Appointment-info">
                        <div>
                            <span class="icon">‚è∞</span> @Appointment.Time
                        </div>
                        <div>
                            <span class="icon">üìÖ</span> @Appointment.Date
                        </div>
                    </div>
                    <div class="Appointment-actions">
                        <form method="post" asp-page-handler="View">
                            <input type="hidden" name="aid" value="@Appointment.id" />
                            <input type="hidden" name="pid" value="@Appointment.Pid" />
                            <input type="hidden" name="did" value="@Appointment.Did" />
                            <button class="btn diagnose" style="display: block; margin: 0 auto;">View Diagnose</button>
                        </form>
                    </div>
                </div>
            }
        </div>
    </div>

    <!-- Canceled Appointments -->
    <div id="canceled" class="Appointment-section">
        <h2>Canceled Appointments</h2>
        <br>
        <div class="Appointments-group">
            @foreach (var Appointment in Model.CancelledAppointments)
            {
                <div class="Appointment-card">
                    <div class="Appointment-header">
                        <img src="@Appointment.image" alt="@Appointment.Name" class="user-photo" />
                        <span>@Appointment.Name</span>
                        <span class="status canceled">@Appointment.Status</span>
                    </div>
                    <div class="Appointment-info">
                        <div>
                            <span class="icon">‚è∞</span> @Appointment.Time
                        </div>
                        <div>
                            <span class="icon">üìÖ</span> @Appointment.Date
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

<script>
    function showSection(sectionId) {
        document.querySelectorAll('.Appointment-section').forEach(function (section) {
            section.classList.remove('active');
            section.style.display = "none"; // Hide all sections
        });

        document.querySelectorAll('.tab').forEach(function (tab) {
            tab.classList.remove('active');
        });

        const selectedSection = document.getElementById(sectionId);
        if (selectedSection) {
            selectedSection.classList.add('active');
            selectedSection.style.display = "block";
        }

        event.target.classList.add('active');
    }

    document.addEventListener('DOMContentLoaded', function () {
        showSection('upcoming'); 
    });
</script>
